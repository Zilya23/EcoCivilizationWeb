
<div class="login">
    <h2 class="login-header">Редактирование события</h2>
    <form name="createApplication" [formGroup]="editForm" class="login-container" (ngSubmit)="editApplication()">
        <div class="page">
            <div class="description">
                <div class="floating-label">
                    <p [ngClass]="{ 'has-error': isSubmitted && formControls.name.errors }"></p>
                    <label>Название*</label><br/>
                    <mat-form-field style="margin-top: 10px;">
                        <input matInput class="floating-label__input" formControlName="name">
                    </mat-form-field>
                </div>

                <div class="floating-label">
                    <p [ngClass]="{ 'has-error': isSubmitted && formControls.description.errors }"></p>
                    <label>Описание*</label><br/>
                    <mat-form-field style="margin-top: 10px;">
                        <textarea matInput class="floating-label__input" formControlName="description"></textarea>
                    </mat-form-field>
                </div>

                <p [ngClass]="{ 'has-error': isSubmitted && formControls.city.errors }">
                    <label>Город*</label>
                    <ng-select class="ng-dropdown" id="selectDropdown" required formControlName="city" style="margin-top: 10px; margin-bottom: 15px;">
                        <ng-option value="" disabled selected >Выберите город*</ng-option>
                        <ng-option *ngFor="let city of cities" value="{{city.id}}">{{city.name}}</ng-option>
                    </ng-select>
                </p>
                <div *ngIf="isSubmitted && formControls.city.errors" class="help-block">
                    <div *ngIf="formControls.city.errors.required" style="color: red;">Укажите город!</div>
                </div>

                <div class="floating-label">
                    <p [ngClass]="{ 'has-error': isSubmitted && formControls.place.errors }"></p>
                    <label>Место проведения*</label><br/>
                    <mat-form-field style="margin-top: 10px;">
                        <textarea matInput class="floating-label__input" formControlName="place"></textarea>
                        </mat-form-field>
                </div>

                <div class="floating-label">
                    <p [ngClass]="{ 'has-error': isSubmitted && formControls.date.errors }"></p>
                        <label>Дата и время*</label>
                        <input class="date-time" type="datetime-local" id="dateTime" formControlName="date">
                </div>
                <div *ngIf="isSubmitted && formControls.date.errors" class="help-block">
                    <div *ngIf="formControls.date.errors.required" style="color: red;">Выберите дату!</div>
                </div>

                <div class="floating-label">
                    <p [ngClass]="{ 'has-error': isSubmitted && formControls.countPart.errors }"></p>
                        <label>Выберите количество участников*</label>
                        <input type="number" class="input-number" min="2" max="30" formControlName="countPart" required>
                </div>
                <div *ngIf="isSubmitted && formControls.countPart.errors" class="help-block">
                    <div *ngIf="formControls.countPart.errors.required" style="color: red;">Выберите количество участников!</div>
                </div>
            </div>

            <div class="gallery">
                <input type="file" class="file-input" accept="image/png, image/jpeg, image/jpg"
                    (change)="onFileSelected($event)" multiple #fileUpload>
                <div class="file-upload">
                {{"Загрузить изображения"}}
                    <a class="upload-a" (click)="fileUpload.click()">
                        <mat-icon>attach_file</mat-icon>
                    </a>
                </div>

                <div *ngFor="let image of photos" class="gallery-place">
                  <img [src]="image.photo" class="galleryimg" alt="Image">
                  <button class="btn-delete" (click)="deleteImg(image)">x</button>
                </div>
            </div>

        </div>

        <p>
            <button type="submit" class="btn">Сохранить</button>
            <dialog #myDialog>
                <p>Вы действительно хотите удалить событие?</p>
                <a (click)="deleteEvent()">Да</a>
                <a (click)="myDialog.close()">Нет</a>
             </dialog>
            <a style="text-align: center;" (click)="myDialog.show()" class="btn">Удалить</a>
        </p>
    </form>
</div>